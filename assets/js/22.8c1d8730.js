(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{380:function(a,s,t){"use strict";t.r(s);var r=t(42),e=Object(r.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"pig"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pig"}},[a._v("¶")]),a._v(" Pig")]),a._v(" "),t("h2",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[a._v("¶")]),a._v(" 介绍")]),a._v(" "),t("p",[a._v("Pig是一个基于Hadoop的大规模数据分析平台，它提供的SQL-LIKE语言叫Pig Latin，该语言的编译器会把类SQL的数据分析请求转换为一系列经过优化处理的MapReduce运算。Pig为复杂的海量数据并行计算提供了一个简单的操作和编程接口。")]),a._v(" "),t("p",[a._v("pig的特点：")]),a._v(" "),t("ol",[t("li",[a._v("专注于于大量数据集分析；")]),a._v(" "),t("li",[a._v("运行在集群的计算架构上，Yahoo Pig 提供了多层抽象，简化并行计算让普通用户使用；这些抽象完成自动把用户请求queries翻译成有效的并行评估计划，然后在物理集群上执行这些计划；")]),a._v(" "),t("li",[a._v("提供类似 SQL 的操作语法；")]),a._v(" "),t("li",[a._v("开放源代码；")])]),a._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("¶")]),a._v(" 安装")]),a._v(" "),t("p",[a._v("如果本来是root用户，先切换成hadoop用户：su hadoop。")]),a._v(" "),t("p",[a._v("把pig-0.17.0.tar.gz传到虚拟机内（路径自己选，我是保存在/home/hadoop/pig下），进入保存的路径：cd  /home/hadoop/pig。")]),a._v(" "),t("p",[a._v("在当前路径下，解压缩pig-0.17.0.tar.gz ：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar  -zxvf  pig-0.17.0.tar.gz\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),t("p",[a._v("注意：在hadoop用户可能提示没有权限，无法解压，此时要切换成root用户(su root)，再进行解压缩，压缩完成之后，记得要再切换成hadoop用户，因为我们所有的操作都是在hadoop用户下进行的。")])]),a._v(" "),t("p",[a._v("配置环境变量：vim  /etc/profile")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PIG_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/hadoop/pig/pig-0.17.0\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$PIG_HOME")]),a._v("/bin\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("输入source /etc/profile使环境变量配置生效。")]),a._v(" "),t("p",[a._v("接下来配置 pig.properties。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd  /home/hadoop/pig/pig-0.17.0/conf\nvim  pig.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("在文件最后加")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("#set mr properties\nfs.defaultFS=hdfs://192.168.188.100（这里写自己的ip）:9000\nmapreduce.framework.name=yarn\nyarn.resourcemanager.address=192.168.188.102（这里也是自己的ip）:8032\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h2",{attrs:{id:"使用实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用实例"}},[a._v("¶")]),a._v(" 使用实例")]),a._v(" "),t("p",[a._v("先将文件放到数据文件data1和data2放到hdfs路径下")]),a._v(" "),t("Picture",{attrs:{src:"/images/hadoop/hdfs.png",width:"30%",alt:"hdfs"}}),a._v(" "),t("h3",{attrs:{id:"filter操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#filter操作"}},[a._v("¶")]),a._v(" Filter操作")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("grunt> A = LOAD '/test/data.txt' AS(a1:int,a2:int,a3:int);\nX = FILTER A BY a3 == 3;\nX = FILTER  A  BY  (a1  ==  8)  OR  (NOT  (a2+a3  >  a1));\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("Picture",{attrs:{src:"/images/hadoop/filter1.png",width:"100%",alt:"filter"}}),a._v(" "),t("Picture",{attrs:{src:"/images/hadoop/filter2.png",width:"100%",alt:"filter"}}),a._v(" "),t("h3",{attrs:{id:"join操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#join操作"}},[a._v("¶")]),a._v(" Join操作")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("grunt>  A  =  LOAD  'data1'  AS  (a1:int,a2:int,a3:int);\ngrunt>  B  =  LOAD  'data2'  AS  (b1:int,b2:int);\ngrunt>  X  =  JOIN  A  BY  a1,  B  BY  b1；\ngrunt>  DUMP  X;\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("Picture",{attrs:{src:"/images/hadoop/join-1.png",width:"100%",alt:"join"}}),a._v(" "),t("Picture",{attrs:{src:"/images/hadoop/join-2.png",width:"100%",alt:"join"}}),a._v(" "),t("h3",{attrs:{id:"order-by操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#order-by操作"}},[a._v("¶")]),a._v(" Order by操作")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("grunt>  A  =  LOAD  'data'  AS  (a1:int,a2:int,a3:int);\ngrunt>  X  =  ORDER  A  BY  a3  \ngrunt>  DUMP  X;\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("Picture",{attrs:{src:"/images/hadoop/order-by-1.png",width:"100%",alt:"order-by"}}),a._v(" "),t("Picture",{attrs:{src:"/images/hadoop/order-by-2.png",width:"100%",alt:"order-by"}}),a._v(" "),t("h3",{attrs:{id:"group操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#group操作"}},[a._v("¶")]),a._v(" Group操作")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("A  =  load  'student'  AS  (name:chararray,age:int,gpa:float);\nDESCRIBE  A;\nA:  {name:  chararray,age:  int,gpa:  float}\nDUMP  A;\nB  =  GROUP  A  BY  age；\nDESCRIBE  B；\nILLUSTRATE  B；\nDUMP  B;\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("Picture",{attrs:{src:"/images/hadoop/group1.png",width:"100%",alt:"group-by"}}),a._v(" "),t("Picture",{attrs:{src:"/images/hadoop/group2.png",width:"100%",alt:"group-by"}}),a._v(" "),t("Picture",{attrs:{src:"/images/hadoop/group3.png",width:"100%",alt:"group-by"}}),a._v(" "),t("Picture",{attrs:{src:"/images/hadoop/group4.png",width:"100%",alt:"group-by"}}),a._v(" "),t("Picture",{attrs:{src:"/images/hadoop/group5.png",width:"100%",alt:"group-by"}})],1)}),[],!1,null,null,null);s.default=e.exports}}]);