<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>安装 | Hadoop</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hadoop 学习笔记">
    
    <link rel="preload" href="/assets/css/0.styles.bea26999.css" as="style"><link rel="preload" href="/assets/js/app.7696aff8.js" as="script"><link rel="preload" href="/assets/js/2.3c301967.js" as="script"><link rel="preload" href="/assets/js/17.3a4cbbc8.js" as="script"><link rel="preload" href="/assets/js/11.7aea8a94.js" as="script"><link rel="prefetch" href="/assets/js/10.239320ff.js"><link rel="prefetch" href="/assets/js/12.a75c9a92.js"><link rel="prefetch" href="/assets/js/13.17c333e6.js"><link rel="prefetch" href="/assets/js/14.c658bd9d.js"><link rel="prefetch" href="/assets/js/15.adf41b6f.js"><link rel="prefetch" href="/assets/js/16.d09250f7.js"><link rel="prefetch" href="/assets/js/18.a7d27d96.js"><link rel="prefetch" href="/assets/js/19.3f563a7b.js"><link rel="prefetch" href="/assets/js/20.cf7aaa65.js"><link rel="prefetch" href="/assets/js/21.dabe57d5.js"><link rel="prefetch" href="/assets/js/22.8c1d8730.js"><link rel="prefetch" href="/assets/js/23.b9917a11.js"><link rel="prefetch" href="/assets/js/24.095af618.js"><link rel="prefetch" href="/assets/js/25.d294f37a.js"><link rel="prefetch" href="/assets/js/26.fc764424.js"><link rel="prefetch" href="/assets/js/27.998a5d50.js"><link rel="prefetch" href="/assets/js/28.7d6e20a5.js"><link rel="prefetch" href="/assets/js/29.d2921661.js"><link rel="prefetch" href="/assets/js/3.566e47d9.js"><link rel="prefetch" href="/assets/js/4.23282b51.js"><link rel="prefetch" href="/assets/js/5.c842d990.js"><link rel="prefetch" href="/assets/js/6.ef414eb3.js"><link rel="prefetch" href="/assets/js/7.3152689a.js"><link rel="prefetch" href="/assets/js/8.530be27e.js"><link rel="prefetch" href="/assets/js/9.a4f965b7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bea26999.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Hadoop</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hadoop/install.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Hadoop
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hadoop/install.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Hadoop
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hadoop/install.html" aria-current="page" class="active sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hadoop/install.html#安装-linux" class="sidebar-link">安装 Linux</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hadoop/install.html#macos-系统下的安装" class="sidebar-link">MacOS 系统下的安装</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#windows-系统下的安装" class="sidebar-link">Windows 系统下的安装</a></li></ul></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#linux-基础" class="sidebar-link">Linux 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hadoop/install.html#第一个命令" class="sidebar-link">第一个命令</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#软件安装与卸载" class="sidebar-link">软件安装与卸载</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#目录组织结构" class="sidebar-link">目录组织结构</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#文件操作" class="sidebar-link">文件操作</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#用户" class="sidebar-link">用户</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#网络相关" class="sidebar-link">网络相关</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#防火墙" class="sidebar-link">防火墙</a></li></ul></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#ssh" class="sidebar-link">SSH</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hadoop/install.html#免密登录" class="sidebar-link">免密登录</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#第三方-ssh-客户端" class="sidebar-link">第三方 SSH 客户端</a></li></ul></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#安装-java" class="sidebar-link">安装 Java</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hadoop/install.html#openjdk" class="sidebar-link">openjdk</a></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#oracle-s-jdk" class="sidebar-link">oracle's jdk</a></li></ul></li><li class="sidebar-sub-header"><a href="/hadoop/install.html#安装-hadoop" class="sidebar-link">安装 Hadoop</a></li></ul></li><li><a href="/hadoop/benchmark.html" class="sidebar-link">集群配置与管理</a></li><li><a href="/hadoop/hdfs.html" class="sidebar-link">HDFS</a></li><li><a href="/hadoop/io.html" class="sidebar-link">Hadoop I/O</a></li><li><a href="/hadoop/mapreduce.html" class="sidebar-link">MapReduce</a></li><li><a href="/hadoop/mysql.html" class="sidebar-link">MySQL</a></li><li><a href="/hadoop/sqoop.html" class="sidebar-link">Sqoop</a></li><li><a href="/hadoop/hive.html" class="sidebar-link">Hive</a></li><li><a href="/hadoop/hbase.html" class="sidebar-link">HBase</a></li><li><a href="/hadoop/pig.html" class="sidebar-link">Pig</a></li><li><a href="/hadoop/spark.html" class="sidebar-link">Spark</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="安装"><a href="#安装" class="header-anchor">¶</a> 安装</h1> <h2 id="安装-linux"><a href="#安装-linux" class="header-anchor">¶</a> 安装 Linux</h2> <p>Linux 有众多发行版本，本节以 CentOS 7 为例。</p> <p>我们将从阿里云的<a href="https://mirrors.aliyun.com/centos/" target="_blank" rel="noopener noreferrer">镜像库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中下载最新的 <a href="https://mirrors.aliyun.com/centos/7.8.2003/isos/x86_64/CentOS-7-x86_64-Minimal-2003.iso" target="_blank" rel="noopener noreferrer">CentOS 7<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的版本。</p> <p>CentOS 提供了多种类型的安装镜像，常见的有：</p> <ul><li>DVD ：标准版</li> <li>Everything ：集成了绝大多数软件</li> <li>Minimal ：精简版，自带软件少</li></ul> <img src="/images/hadoop/centos7.8.2003.png" width="100%" height="auto" loading="lazy" alt="各种 CentOS 7 镜像类型" style="display:block;margin:2.2rem auto;max-width:100%;" data-v-2d939f46> <p>由于 DVD 和 Everything 文件太大，而且老师虽然提供的是 DVD 版本，但在安装时选择的仍是最小化安装 ，所以这里以 <a href="https://mirrors.aliyun.com/centos/7.8.2003/isos/x86_64/CentOS-7-x86_64-Minimal-2003.iso" target="_blank" rel="noopener noreferrer">Minimal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 版本为例。Minimal 自带的软件较少，在需要时我们会手动安装。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>老师提供的版本是 CentOS 7.5.1804，是 2018 年 4 月发布的。但该版本在阿里云的镜像库中已被废弃。我这里使用的是目前最新的 CentOS 7.8.2003（截止 2020.10.25）。</p></div> <h3 id="macos-系统下的安装"><a href="#macos-系统下的安装" class="header-anchor">¶</a> MacOS 系统下的安装</h3> <p>MacOS 系统下，推荐两款虚拟机：</p> <ul><li>Parallels Desktop 什么都好，就是太贵</li> <li>VirtualBox 表现不差，而且免费</li></ul> <h4 id="parallels-desktop"><a href="#parallels-desktop" class="header-anchor">¶</a> Parallels Desktop</h4> <p>首先下载安装 <a href="https://www.parallels.cn/products/desktop/buypd3/?full" target="_blank" rel="noopener noreferrer">Parallels Desktop<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>， 然后参照 <a href="/hadoop/parallels">PD 安装 CentOS 教程</a> 。</p> <h4 id="virtualbox"><a href="#virtualbox" class="header-anchor">¶</a> VirtualBox</h4> <p>VirtualBox 是 Oracle 推出的一个免费开源的虚拟机，支持 MacOS、Windows 等系统，占用资源少。</p> <p>首先根据自身操作系统选择下载安装 <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener noreferrer">VirtualBox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（这里以 MacOS 系统为例），然后参照 <a href="/hadoop/virtualbox">VirtualBox 安装 CentOS 教程</a> 。</p> <h3 id="windows-系统下的安装"><a href="#windows-系统下的安装" class="header-anchor">¶</a> Windows 系统下的安装</h3> <p>Windows 系统下，推荐两款虚拟机：</p> <ul><li>VMWare Player 使用最多，耗费性能</li> <li>VirtualBox 开源免费，占用资源少</li></ul> <h4 id="vmware-player"><a href="#vmware-player" class="header-anchor">¶</a> VMWare Player</h4> <p>VMWare 是商业软件，收费的。VMWare Player 非商用时是免费的。</p> <p>首先下载安装 <a href="https://my.vmware.com/en/web/vmware/downloads/details?downloadGroup=PLAYER-1600&amp;productId=1039&amp;rPId=51984" target="_blank" rel="noopener noreferrer">VMWare Player<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，然后参照 <a href="/hadoop/vmwareplayer">VMWare Player 安装 CentOS 教程</a> 。</p> <h4 id="virtualbox-2"><a href="#virtualbox-2" class="header-anchor">¶</a> VirtualBox</h4> <p>VirtualBox 不仅支持 MacOS，还支持 Windows 和 Linux。相比 VMWare ，占用的资源更少。对于电脑性能一般的同学，建议使用 VirtualBox。</p> <p>下载安装 <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener noreferrer">VirtualBox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，然后参照 <a href="/hadoop/virtualbox">VirtualBox 安装 CentOS 教程</a> 。</p> <h2 id="linux-基础"><a href="#linux-基础" class="header-anchor">¶</a> Linux 基础</h2> <h3 id="第一个命令"><a href="#第一个命令" class="header-anchor">¶</a> 第一个命令</h3> <p>登录 Linux 系统过后，在终端输入：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ls /home
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>ls</code> 用于输出指定目录下的文件或目录。<code>ls</code> 是 list 的缩写。</p> <h3 id="软件安装与卸载"><a href="#软件安装与卸载" class="header-anchor">¶</a> 软件安装与卸载</h3> <p>CentOS 提供了一个非常方便的软件包管理器：yum，可以让我们一键下载安装。不仅如此，yum 会自动帮我们下载安装当前软件所需的依赖包，不用我们手动去安装依赖。如果有使用过 Windows 安装大型单机游戏的同学，应该深有体会上网搜索各种 .dll 依赖文件的痛苦。而使用 yum ，我们无需操心这一切。</p> <p>首先，我们使用 yum 安装我们的第一个软件：vim。</p> <p>1.在终端输入 <code>su</code>，回车输入 root 账号密码，切换到 root 账号</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>su
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.使用 yum 安装 vim</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install vim -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中，<code>-y</code> 参数可省，当添加了 <code>-y</code> 参数，安装过程中所有的配置询问均设为 yes 。不加这个参数，安装过程中需要手动输入 <code>y</code>。</p> <p>这样，vim 就安装完成了。</p> <p>vi 是类 Unix 系统中的一款优秀的文本编辑器，vim 是 vi 的增强版。Linux 默认只会预装 vi ，比较古老，而 vim 功能更强大且更好用。</p> <p>卸载软件使用 <code>yum remove</code>，如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum remove vim
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>接下来我们都会使用 vim 进行文本编写。</p> <h3 id="目录组织结构"><a href="#目录组织结构" class="header-anchor">¶</a> 目录组织结构</h3> <p>与 Windows 不同，Linux 没有 C 盘、D 盘的概念。Linux 只有层级的目录结构。最顶层是<strong>根目录</strong>，用 <code>/</code> 表示。</p> <p>在根目录下面有各种系统目录。常用的目录如下图所示：</p> <img src="/images/hadoop/dir.png" width="100%" height="auto" loading="lazy" alt="目录组织结构" style="display:block;margin:2.2rem auto;max-width:100%;" data-v-2d939f46> <ol><li><code>/etc</code> 用于放置各种配置文件，如我们的环境变量就存放在 /etc/profile 文件中。</li> <li><code>/home</code> 用于放置所有用户的家目录（除了 root 账户，它有专门的 /root 目录），如我们创建的 hadoop 用户的家目录就是 /home/hadoop/。</li> <li><code>/usr</code> 用于存在各种软件资源，如我们下载的 java 程序就可以放在这里。usr 是 Unix Software Resource 的缩写。</li> <li><code>/tmp</code> 用于放置各种临时文件。系统关闭后 <code>/tmp</code> 中的文件会被删除，所以不要在 <code>/tmp</code> 目录下存在重要文件。</li></ol> <h3 id="文件操作"><a href="#文件操作" class="header-anchor">¶</a> 文件操作</h3> <p>这里列出了常见的文件操作。</p> <h4 id="ls"><a href="#ls" class="header-anchor">¶</a> ls</h4> <p>前面已经介绍过 <code>ls</code>，它用于输出指定路径下的文件和目录。若不指定路径，则默认为当前目录。</p> <p><code>ls</code> 还有一些有用的参数。</p> <ul><li><code>-a</code> 输出指定目录下所有的文件，包括隐藏文件</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>ls -a /home/hadoop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>-l</code> 输出文件的详细信息，包括文件类型、权限、时间、所属用户，文件大小等</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>ls -l /home/hadoop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>具体信息的含义如下：
<img src="/images/hadoop/ls-l.jpeg" width="100%" height="auto" loading="lazy" alt="ls -l" style="display:block;margin:2.2rem auto;max-width:100%;" data-v-2d939f46></p> <p>多个参数也可以一起使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ls -al
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Linux 中以 <code>.</code> 开头的文件名表示隐藏文件，需要使用 <code>ls -a</code> 才能查看。</p></div> <h4 id="cd"><a href="#cd" class="header-anchor">¶</a> cd</h4> <p><code>cd</code> 用于切换当前目录，如</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd /home/hadoop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>则当前目录跳转到 /home/hadoop 下。</p> <h4 id="pwd"><a href="#pwd" class="header-anchor">¶</a> pwd</h4> <p><code>pwd</code> 用于打印当前路径</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pwd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>则终端输出 /home/hadoop</p> <h4 id="mkdir"><a href="#mkdir" class="header-anchor">¶</a> mkdir</h4> <p><code>mkdir</code> 用于创建目录。
假如当前目录为 /home/hadoop，我们创建三个目录：data、apps、temp：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir data apps temp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>mkdir 有一个 <code>-p</code> 参数，可以递归创建目录。如在当前目录下创建 dir1/dir2/dir3/dir4：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir -p dir1/dir2/dir3/dir4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="touch"><a href="#touch" class="header-anchor">¶</a> touch</h4> <p><code>touch</code> 命令用来创建文件。如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>touch readme
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>则在当前目录下，创建了一个名为 readme 的文件。Linux 中文件是不区分扩展名的，因此 readme 和 readme.txt 对文件本身来说没有什么影响。只不过为了方便用户今后区分，对于特定格式的文件最好加上扩展名，如 score.csv 。</p> <h4 id="rm"><a href="#rm" class="header-anchor">¶</a> rm</h4> <p><code>rm</code> 用于删除文件。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rm readme
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除目录需要使用 <code>-r</code> 参数</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rm -r dir1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在某些版本的 Linux 中，删除之前会有提示 &quot;确定要删除？&quot;，需手动输出 <code>y</code> 确定删除。当一个目录下有很多文件时一个个确认会让人发疯，可以加一个 <code>-f</code> 参数，强制删除。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rm -rf test/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>rm 删除之后，不可恢复。Linux 中没有类似于 Windows 中的回收站。</p></div> <h4 id="cp"><a href="#cp" class="header-anchor">¶</a> cp</h4> <p><code>cp</code> 用于拷贝文件。</p> <p>如把 /etc/profile 拷贝到 /home/hadoop目录下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cp /etc/profile /home/hadoop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以在当前目录下拷贝一份副本：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cp readme readme_copy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>拷贝目录需要使用 <code>-r</code> 参数。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cp -r apps apps_copy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="cat"><a href="#cat" class="header-anchor">¶</a> cat</h4> <p><code>cat</code> 用于查看文本文件中的内容。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cat /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>cat</code> 命令简单快捷，缺点就是 <code>cat</code> 命令会将文本中的内容一下子全部显示出来。当文本内容很多时，这会很不方便。</p> <h4 id="less"><a href="#less" class="header-anchor">¶</a> less</h4> <p><code>less</code> 用于查看文本文件中的内容，但它不会像 <code>cat</code> 那样一下子显示全部内容，而是只显示部分：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>less /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>按 <em>回车键</em> 会显示下一行，按 <em>空格键</em> 显示下一页，按 <code>q</code> 键退出。</p> <h4 id="head"><a href="#head" class="header-anchor">¶</a> head</h4> <p>有时候我们只想查看一个文件的前面几行，比如我们想看看一个文件的前几行注释来了解文件的内容概要。这时可以使用 <code>head</code> 命令。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>head /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>head</code> 默认显示前 10 行，可以通过 <code>-n</code> 参数指定显示的行数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>head -n 20 /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样就会显示前 20 行。</p> <h4 id="tail"><a href="#tail" class="header-anchor">¶</a> tail</h4> <p>与 <code>head</code> 相反，有时候我们只想查看一个文件的最后几行，比如我们想看看一个日志文件新追加的内容。这时可以使用 <code>tail</code> 命令。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>tail /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>tail</code> 默认显示最后 10 行，可以通过 <code>-n</code> 参数指定显示的行数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>tail -n 20 /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样就会显示最后 20 行。</p> <h4 id="mv"><a href="#mv" class="header-anchor">¶</a> mv</h4> <p><code>mv</code> 用于移动文件。</p> <p>比如将 readme 文件移动到 data_copy 目录下面：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mv readme data_copy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>mv</code> 也可以移动目录。</p> <p>并且，<code>mv</code> 命令可以用作文件重命名：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mv readme README
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样，文件 readme 就被改为 README 了。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Linux 系统下，无论命令、参数还是文件名，都是区分大小写的。</p></div> <h4 id="chmod"><a href="#chmod" class="header-anchor">¶</a> chmod</h4> <p><code>chmod</code> 用于更改文件或目录的权限。文件有 3 种权限：读(r)、写(w)和执行(x)。</p> <p>前面我们看过这张图：</p> <img src="/images/hadoop/ls-l.jpeg" width="100%" height="auto" loading="lazy" alt="ls -l" style="display:block;margin:2.2rem auto;max-width:100%;" data-v-2d939f46> <p>其中，蓝颜色的 <code>rw-r--r--</code> 代表的就是该文件的权限，以 3 个字符为一组：</p> <ol><li>最开始的 <code>rw-</code> 代表文件 <strong>所有者(u)</strong> 拥有读写权限，其中 <code>-</code> 代表没有执行权限</li> <li>紧接着的 <code>r--</code> 代表文件 <strong>所属组(g)</strong> 只拥有读权限，其中 <code>--</code> 代表没有写和执行权限</li> <li>最后的 <code>r--</code> 代表 <strong>其他用户(o)</strong> 只拥有读权限，其中 <code>--</code> 代表没有写和执行权限</li></ol> <p>有时候，我们需要更改某个文件的权限，可以使用 <code>chmod</code> 命令。</p> <p>Linux 为每种权限规定了一个数字：</p> <table><thead><tr><th style="text-align:center;">权限</th> <th style="text-align:left;">数值</th></tr></thead> <tbody><tr><td style="text-align:center;">r</td> <td style="text-align:left;">4</td></tr> <tr><td style="text-align:center;">w</td> <td style="text-align:left;">2</td></tr> <tr><td style="text-align:center;">x</td> <td style="text-align:left;">1</td></tr></tbody></table> <p>把各个权限对应的数值相加，可得到一个权限和。</p> <p>如 <code>rwx</code> 为 4 + 2 + 1 = 7，<code>rw-</code> 为 4 + 2 + 0 = 6，<code>r--</code> 为 4 + 0 + 0 = 4。</p> <p>故 755 对应：<code>rwxr-xr-x</code>，777 对应 <code>rwxrwxrwx</code>，644 对应 <code>rw-r--r--</code>。</p> <p>到这里，我们就知道怎样使用 <code>chmod</code> 为文件修改权限了，如</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>chmod 755 file.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面的命令表示将 file.txt 的权限改为 <code>rwxr-xr-x</code> 。</p> <p>使用数字表示权限的方式是最常用的。如果记不住这些数字，也可以使用下面这种更直观的方式：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>给文件所有者添加执行权限↓
chmod u+x file.txt
删除文件所属组用户的写权限↓
chmod g-w file.txt 
给其他用户添加读和写的权限↓
chmod o+rw file.txt
删除文件所有者的执行权限，并且给所属组用户添加写权限↓
chmod u-x,g+w file.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果想修改一个目录下面所有的子目录及子文件，可以使用 <code>-R</code> 参数，递归修改访问权限，如</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>chmod -R 755 apps/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="chown-与-chgrp"><a href="#chown-与-chgrp" class="header-anchor">¶</a> chown 与 chgrp</h4> <p><code>chown</code> 可以改变文件的所有者，<code>chgrp</code> 可以改变文件的所属组，</p> <p>再来看一下这张图：</p> <img src="/images/hadoop/ls-l.jpeg" width="100%" height="auto" loading="lazy" alt="ls -l" style="display:block;margin:2.2rem auto;max-width:100%;" data-v-2d939f46> <p>其中<span style="color:#f5893d;">橙色</span>部分和<span style="color:#db438e;">洋红色</span>的部分分别表示该文件的所有者和所属组。</p> <p>其中，<strong>所有者</strong> 的意思很好理解，就是这个文件属于哪个用户。通常谁创建的文件，谁就是所有者。</p> <p><strong>所属组</strong> 的意思就容易引起歧义了。Linux 中每个用户都属于某个用户组，新创建的用户会有一个同名的用户组，如创建 hadoop 用户的同时会创建一个叫 hadoop 的用户组，一个用户可以同时属于多个用户组。所以，文件的所属组的意思就是：文件的所有者所属的用户组。</p> <p>使用 <code>chown</code> 改变文件的所有者</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>chown jack file.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样，file.txt 的所有者就变成了 jack。</p> <p>使用 <code>chgrp</code> 改变文件的所属组</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>chgrp friends file.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样，file.txt 的所有组就变成了 friends。</p> <p>如果想递归设置子目录及子文件的所有者/所属组，使用 <code>-R</code> 参数。</p> <h4 id="gzip-与-gunzip"><a href="#gzip-与-gunzip" class="header-anchor">¶</a> gzip 与 gunzip</h4> <p>这两个命令是用来压缩和解压缩的。</p> <p>压缩：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gzip file.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>解压缩：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gunzip file.txt.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="tar"><a href="#tar" class="header-anchor">¶</a> tar</h4> <p>有时候我们需要把一个目录变成一个文件，或者多个文件和目录合并成一个文件，以便于在网路上传输。</p> <p>这时就需要 tar 命令了，它可以将一大堆文件和目录进行归档。</p> <p>tar 命令本身不难，但麻烦的是它有很多参数，容易弄混。这里我们只介绍几个常用的参数组合：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将 test 目录归档为 test.tar ↓
tar -cvf test.tar test/
解开 test.tar 归档文件 ↓
tar -xvf test.tar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>由于归档和压缩这两件事经常同时使用，所以也可以使用一个 <code>z</code> 参数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将 test 目录归档并压缩 ↓
tar -zcvf test.tar.gz test/
将 test.tar.gz 文件解压缩并且解开归档 ↓
tar -zxvf test.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="vim"><a href="#vim" class="header-anchor">¶</a> vim</h4> <p>vim 是 Linux 系统中最常用的编辑器。默认的 CentOS 7 中没有预装，需要首先安装</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim install vim -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>之后，就可以使用 vim 命令编辑或者创建文件了。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim test.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>vim 的具体操作细节非常复杂，这里我们只介绍基本操作。</p> <p>刚进入 vim 的时候，是不能直接输入的，需要按下 <code>i</code> 键或者 <code>o</code> 键才能进入<strong>编辑模式</strong>。然后使用上下左右键进行光标定位，或者输入内容。</p> <p>编辑完成之后，需要退出编辑模式才能保存或退出。退出编辑模式需要按下 <code>Esc</code> 键。之后输入 <code>:wq</code> 进行保存退出。如果不想保存，则输入 <code>:q!</code> 进行退出。</p> <p>要想查找某些内容，需要首先按下 <code>Esc</code> 键退出编辑模式，然后输入 <code>/</code>，后接要查找的内容，如 <code>/hello</code> ，便会查找所有的 “hello” , 按 <code>n</code> 回跳到下一个匹配的地方。</p> <h3 id="用户"><a href="#用户" class="header-anchor">¶</a> 用户</h3> <h4 id="su"><a href="#su" class="header-anchor">¶</a> su</h4> <p>有些命令需要 root 权限才能执行，使用 su 可以切换为 root 账号。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>su
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用 <code>exit</code> 可以退出 root 账号。</p> <p><code>su hadoop</code> 也可重新切换回 hadoop 用户。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>还有一个命令 <code>sudo</code> 允许普通用户临时使用 root 权限，但需要在 sudoers 文件中添加当前用户，使用 root 用户输入 <code>visudo</code> 命令，在相应位置添加：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">## Next comes the main part: which users can run what software on</span>
<span class="token comment">## which machines (the sudoers file can be shared between multiple</span>
<span class="token comment">## systems).</span>
<span class="token comment">## Syntax:</span>
<span class="token comment">##</span>
<span class="token comment">##      user    MACHINE=COMMANDS</span>
<span class="token comment">##</span>
<span class="token comment">## The COMMANDS section may have other options added to it.</span>
<span class="token comment">##</span>
<span class="token comment">## Allow root to run any commands anywhere</span>
root    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       ALL
hadoop  <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       ALL
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div> <h4 id="useradd"><a href="#useradd" class="header-anchor">¶</a> useradd</h4> <p><code>useradd</code> 用于添加用户，只有 root 账号拥有此权限，所以要使用 <code>su</code> 命令切换到 root 账号。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>useradd jack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时系统中多了一个 jack 用户，可以看到 /home 目录下多了一个 /home/jack 目录，那是用户 jack 的家目录。</p> <h4 id="passwd"><a href="#passwd" class="header-anchor">¶</a> passwd</h4> <p><code>passwd</code> 用于给用户设置或修改密码，只有 root 权限才可执行：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>passwd jack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时，你可以设置 jack 的密码了。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>passwd 还可以修改 root 账户的密码，但前提是你已经登录了 root 账号。如果你一开始就忘记了 root 账号的密码，登不进系统，那么你是没办法更改密码的（需要进入 BIOS 进行重置）。</p></div> <h4 id="userdel"><a href="#userdel" class="header-anchor">¶</a> userdel</h4> <p><code>userdel</code> 用于删除用户。只有 root 权限才可执行：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>userdel jack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>直接执行 <code>userdel</code> 不会删除用户的家目录，可以手动删除，如 <code>rm -rf /home/jack</code>。</p> <p>也可以使用 <code>-r</code> 参数，在删除用户的时候一并删除该用户的家目录：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>userdel -r jack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="网络相关"><a href="#网络相关" class="header-anchor">¶</a> 网络相关</h3> <h4 id="ping"><a href="#ping" class="header-anchor">¶</a> ping</h4> <p>使用 <code>ping</code> 命令查看当前 Linux 与其他主机的网络是否通畅：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ping baidu.com
ping 39.156.69.79
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="自定义主机名解析"><a href="#自定义主机名解析" class="header-anchor">¶</a> 自定义主机名解析</h4> <p>每个能上网的主机都有一个 ip 地址，但是 ip 地址并不好记，如果能给每个主机起个名字就好了。可以通过修改 /etc/hosts 文件（修改需要 root 权限）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /etc/hosts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>我们在后面添加一些自定义的解析：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
10.211.55.100  hadoop100
10.211.55.101  hadoop101
10.211.55.102  hadoop102
10.211.55.103  hadoop103
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>ip 和主机名之间至少要有一个空格</p></div> <p>这样，我们就可以直接使用主机名来标识一台主机了，如</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ping hadoop100
ssh hadoop101
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="scp"><a href="#scp" class="header-anchor">¶</a> scp</h4> <p><code>scp</code> 命令用于在主机之间复制文件或目录。</p> <p>命令格式为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>scp source_file dest_file
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中，source_file 表示源文件，dest_file 表示目标文件。这两个文件都可以使用 <strong><code>user@ip:file_name</code></strong> 的形式表示，user 表示登录用户，ip 为 ip 地址或者主机名，file_name 表示文件路径。</p> <p>比如将当前主机上的文件发给另一台主机：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>scp /home/zhangsan/file.txt lisi@10.211.55.7:/home/lisi/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以从另一台主机拷贝文件到本地：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>scp lisi@10.211.55.7:/home/lisi/file.txt /home/zhangsan
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果要传输的是目录，需要加上 <code>-r</code> 参数，</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>scp -r /home/zhangsan/apps lisi@10.211.55.7:/home/lisi/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="sftp"><a href="#sftp" class="header-anchor">¶</a> sftp</h4> <p><code>sftp</code> 也可以用来传输文件，它是安全版的 ftp 。</p> <p>命令格式为 <code>sftp user@ip</code>。比如，</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sftp hadoop@10.211.55.100
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输入密码过后，便出现 sftp 的提示符：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sftp&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时，你就相当于以 hadoop 用户的身份登录了 10.211.55.100 。你可以输入绝大多数 Linux 的命令，比如 <code>ls</code>，<code>cd</code>。注意，此时你输入的命令影响的是 10.211.55.100 这台主机，而不是你的本地主机。如果想影响本地主机，需要在命令前加上 <code>l</code> ，如 <code>lls</code>。</p> <p>sftp 有一些自己的命令用来传输文件或目录，比如，我本地是 zhangsan，远程是 lisi，则</p> <p><strong>put</strong>：将本地文件发送给远程主机：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sftp&gt; put /home/zhangsan/file1.txt /home/lisi/ 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>get</strong>：从远程主机上拷贝文件到本地：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sftp&gt; get /home/lisi/file2.txt /home/zhangsan
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>退出 sftp 使用 Ctrl + D。</p> <h4 id="ip-addr"><a href="#ip-addr" class="header-anchor">¶</a> ip addr</h4> <p><code>ip addr</code> 用来查看 ip 地址。这个命令是 CentOS 默认安装的。</p> <p>还有一个命令 <code>ifconfig</code> 也很常用。但 CentOS 7 中已移除了，需要自己手动安装：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install net-tools
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>之后就可以使用 <code>ifconfig</code> 命令了。</p> <p>这里扩展一下关于网络接口的知识。</p> <p>常见的网络接口有：</p> <ul><li><strong>eth0</strong> 有线网卡，就是用网线连接。在虚拟机中你如果使用的是共享主机的网络，那么你可能会有 eth0 这个接口，因为虚拟机帮你虚拟出一个有线网卡。</li> <li><strong>lo</strong> 本地回环，对应一个虚拟网卡，本地 IP 地址是 127.0.0.1。如果你在本地搭建了一个服务器，那么你就可以在浏览器中输入 127.0.0.1 访问它了，它对应的主机名是 localhost 。</li> <li><strong>wlan0</strong> 无线网卡，对应 Wi-Fi 无线连接。</li></ul> <p>在某些新版本的 CentOS 中，网络接口的名称可能有所改变，如使用 en 前缀表示有线网卡，wl 前缀表示无线网卡。</p> <p>你的 Linux 中可能还有一个 <strong>virbr0</strong> 接口（这与你在 PD 或者 VMWare 中选择的网络设置有关），这是虚拟机帮你生成的，以帮你转换虚拟机到本机的网络连接，这样你的虚拟机就能通过本机访问外网了。</p> <h4 id="关于端口"><a href="#关于端口" class="header-anchor">¶</a> 关于端口</h4> <p>先看一个端口的例子：<code>10.211.55.100:8088</code>。其中，8088 就是端口。</p> <p>我们可以通过不同的端口连接到其他的电脑。在不同的端口你能得到的服务也可能不同。</p> <p>如果把电脑比作一个学校，那么 ip 就相当于学校的地址，端口就相当于不同的教室。假如 &quot;数据科学导论&quot; 这门课在 N104 教室进行，那么你跑到 L107 教室是没用的。如果 N104 教室门锁上了（设置了防火墙），你也进不去。</p> <p>HTTP 服务使用 80 端口，SSH 服务使用 22 端口。</p> <h3 id="防火墙"><a href="#防火墙" class="header-anchor">¶</a> 防火墙</h3> <p>防火墙的存在是为了保护服务器的安全，通常仅开放特定的端口对外提供服务，其余端口关闭。</p> <p>hadoop 集群的搭建一般都在内网，很少考虑安全性，为了节点间通讯方便，通常会关闭防火墙。但如果服务器对外开放，防火墙一定要开启，不能为了省事一关了之，否则会有极大地安全风险：<strong>你会被开除！</strong></p> <p>CentOS 系统通常会自带防火墙，如果没有，使用 <code>yum install firewalld</code> 进行安装。</p> <h4 id="开启防火墙"><a href="#开启防火墙" class="header-anchor">¶</a> 开启防火墙</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl start firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="关闭防火墙"><a href="#关闭防火墙" class="header-anchor">¶</a> 关闭防火墙</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl stop firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="开机自启动防火墙"><a href="#开机自启动防火墙" class="header-anchor">¶</a> 开机自启动防火墙</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl enable firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="取消开机自启动防火墙"><a href="#取消开机自启动防火墙" class="header-anchor">¶</a> 取消开机自启动防火墙</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl disable firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="查看防火墙状态"><a href="#查看防火墙状态" class="header-anchor">¶</a> 查看防火墙状态</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl status firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="ssh"><a href="#ssh" class="header-anchor">¶</a> SSH</h2> <p>两台机器在网络上通信时，需要遵循相同的协议，如 HTTP 协议，FTP 协议，各种电子邮件协议。</p> <p>SSH 也是一种协议，且更加安全。SSH 协议中，有两个文件：私钥和公钥。正是私钥和公钥的存在，才使得 SSH 协议更加安全。私钥是本地保留的，不能公开，公钥是要发送给通信的对方。</p> <p>CentOS 中默认安装了 SSH 。可以使用 <code>ssh user@ip</code> 来远程登录某台主机，如</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ssh hadoop@10.211.55.100
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="免密登录"><a href="#免密登录" class="header-anchor">¶</a> 免密登录</h3> <p>上面的那种方式登录每次都需要输入密码。接下来介绍一种免密登录的方法。</p> <p>首先，使用如下命令生成私钥和公钥：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ssh-keygen -t rsa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>-t</code> 用来指定加密算法的类型，rsa 是最常用的一种加密算法。</p> <p>这样，在当前用户家目录下的 .ssh 目录中就生成了私钥(id_rsa)和公钥(id_rsa.pub)。同时 .ssh 目录中还有一个 authorized_keys 文件（如果没有，也可以手动创建），这个文件中保存了很多公钥。如果 authorized_keys 文件中保存了另一台主机的公钥，那么另一台主机就可以免密登录当前主机了。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>authorized_keys 中存放了谁，谁就能免密登录当前主机。</p></div> <p>所以要想免密登录某台主机很简单：把当前主机的 id_rsa.pub 中的内容复制粘贴到目标主机的 .ssh 目录下的 authorized_keys 文件中即可（是追加，不是覆盖）。</p> <p>有时候你可能想免密登录自己，只需</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cat id_rsa.pub &gt;&gt; authorized_keys
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>&gt;&gt;</code> 表示追加内容到末尾。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果 authorized_keys 中已经有某台主机的公钥了，仍不能免密登录，可能是因为 .ssh 目录本身的权限不对，或者 .ssh 目录下的文件权限不对，或者是你重新使用 <code>ssh-keygen</code> 生成了新的私钥和公钥却没有往 authorized_keys 中添加。</p> <p>如果是权限问题，解决方法参考：<a href="/hadoop/qa">Hadoop Q&amp;A</a></p></div> <h3 id="第三方-ssh-客户端"><a href="#第三方-ssh-客户端" class="header-anchor">¶</a> 第三方 SSH 客户端</h3> <p>有很多优秀的第三方 SSH 客户端，如 Putty（Windows），SecureCRT，SSH shell（Mac）等。</p> <h2 id="安装-java"><a href="#安装-java" class="header-anchor">¶</a> 安装 Java</h2> <p>Java 有两个发行版本：openjdk 和 oracle's jdk。openjdk 由 sun 公司开源，oracle's jdk 则由 oracle 公司维护。 Hadoop 开发使用这两个版本的 jdk 都可以，但建议使用 oracle's jdk。</p> <h3 id="openjdk"><a href="#openjdk" class="header-anchor">¶</a> openjdk</h3> <p>openjdk 是 jdk 的开源版本，完全自由，开放源码。</p> <p>安装：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install -y java-1.8.0-openjdk*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>完成之后，在终端输入</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>java -version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>正常显示，则安装完成。</p> <h3 id="oracle-s-jdk"><a href="#oracle-s-jdk" class="header-anchor">¶</a> oracle's jdk</h3> <p>首先下载 <a href="https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html" target="_blank" rel="noopener noreferrer">JDK安装包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，然后通过 sftp 或者 scp 将安装包发送到虚拟机中的 /tmp 目录下。</p> <p>解压缩：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>tar -zxvf /tmp/jdk-8u202-linux-x64.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>之后就会在 /tmp 目录下解压生成 jdk1.8.0_202 目录。将其移动到 /usr 目录下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mv /tmp/jdk1.8.0 /usr
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>接下来配置环境变量：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vi /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在文件后面添加：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>JAVA_HOME=/usr/jdk1.8.0_202
CLASSPATH=$CLASSPATH:$JAVA_HOME/lib
PATH= $PATH:$JAVA_HOME/bin
export PATH JAVA_HOME CLASSPATH
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>保存退出后，使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>source /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使配置立即生效。</p> <p>最后，在终端输入</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>java -version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>正常输出，则安装成功。</p> <h2 id="安装-hadoop"><a href="#安装-hadoop" class="header-anchor">¶</a> 安装 Hadoop</h2> <p>有了上面的基础，安装 hadoop 就很简单了。</p> <p>这里我们假设一共有四台 Linux 主机：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>10.211.55.100  hadoop100
10.211.55.101  hadoop101
10.211.55.102  hadoop102
10.211.55.103  hadoop103
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>其中，hadoop100 作为主节点。每台主机中都有一个名为 hadoop 的用户。开始之前，将这四台主机的防火墙都关闭</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl stop firewalld.service
systemctl disable firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>首先，以 hadoop 用户登录 hadoop100 ，配置 SSH：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>su - hadoop         # 切换为hadoop用户，并切换至家目录
ssh-keygen -t rsa   # 使用 rsa 算法生成 ssh 密钥和公钥
chmod 755 .ssh      # 更改 .ssh 目录权限
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /etc/ssh/ssh_config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>找到 <code># StrictHostKeyChecking ask</code> 改为 <code>StrictHostKeyChecking no</code>。这是为了避免首次连接需要输入“yes”。</p> <p>之后在其余的主机中，以同样的方式配置 SSH 。</p> <p>通常这样生成的公钥和密钥的文件权限是没有问题的，如果后面 ssh 不能免密登录，请参考：<a href="/hadoop/qa">Hadoop Q&amp;A</a>。</p> <p>然后返回 hadoop100 主机</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>su - hadoop
cd .ssh
cat id_rsa.pub &gt;&gt; authorized_keys  # 将公钥追加到 authorized_keys 文件中
ssh hadoop101 cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys  # 将hadoop101主机中的公钥追加到 hadoop100主机的authorized_keys中
ssh hadoop102 cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys  # 将hadoop102主机中的公钥追加到 hadoop100主机的authorized_keys中
ssh hadoop103 cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys  # 将hadoop103主机中的公钥追加到 hadoop100主机的authorized_keys中

scp ~/.ssh/authorized_keys hadoop101:~/.ssh/authorized_keys  # 将hadoop100中的authorized_keys发送给hadoop101
scp ~/.ssh/authorized_keys hadoop101:~/.ssh/authorized_keys  # 将hadoop100中的authorized_keys发送给hadoop102
scp ~/.ssh/authorized_keys hadoop101:~/.ssh/authorized_keys  # 将hadoop100中的authorized_keys发送给hadoop103
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>之后，你可以依次测试 ssh 是否能够免密登录任意两台机器了，如</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ssh hadoop103
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果 ssh 不能免密登录，请参考：<a href="/hadoop/qa">Hadoop Q&amp;A</a>。</p></div> <p>然后在 hadoop100 的 /home/hadoop 目录下新建三个目录：<code>apps/ data/ temp/</code>。</p> <p>使用 sftp 将 <a href="http://archive.apache.org/dist/hadoop/core/hadoop-3.2.0/hadoop-3.2.0.tar.gz" target="_blank" rel="noopener noreferrer">hadoop-3.2.0.tar.gz<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 上传到 hadoop100</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sftp&gt; put hadoop-3.2.0.tar.gz /home/hadoop/apps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>解压：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>tar -zxvf hadoop-3.2.0.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改相关配置文件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd /home/hadoop/apps/hadoop-3.2.0/etc/hadoop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用 vim 打开以下文件，添加或修改相关内容</p> <p><strong>hadoop-env.sh</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>export JAVA_HOME=/usr/jdk1.8.0_202

export HADOOP_HOME=/home/hadoop/apps/hadoop-3.2.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>core-site.xml</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://10.211.55.100:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/home/hadoop/data/hadoopdata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.proxyuser.hadoop.hosts<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.proxyuser.hadoop.groups<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>hdfs-site.xml</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.name.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/home/hadoop/data/hadoopdata/name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.dataname.data.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/home/hadoop/data/hadoopdata/data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.http-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>10.211.55.100:50070<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>mapred-site.xml</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.app.mapreduce.am.env<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>HADOOP_MAPRED_HOME=${HADOOP_HOME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.map.env<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>HADOOP_MAPRED_HOME=${HADOOP_HOME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.reduce.env<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>HADOOP_MAPRED_HOME=${HADOOP_HOME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>yarn-site.xml</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>10.211.55.102<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.webapp.address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>10.211.55.102:8088<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>workers</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>10.211.55.100
10.211.55.101
10.211.55.102
10.211.55.103
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意：上面的安装我们都是以 hadoop 用户进行的。</p></div> <p>接下来需要修改环境变量：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim ~/.bashrc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>export HADOOP_HOME=/home/hadoop/apps/hadoop-3.2.0
export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用 <code>source ~/.bashrc</code> 使环境变量更改立即生效。</p> <p>在终端输入</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hadoop version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>正常输出则 hadoop 安装完成。</p> <p>接下来，将安装好的 hadoop 包以及环境变量配置文件分发给其余的节点：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>scp -r ~/apps/hadoop-3.2.0/ hadoop101:~/apps/
scp -r ~/apps/hadoop-3.2.0/ hadoop102:~/apps/
scp -r ~/apps/hadoop-3.2.0/ hadoop103:~/apps/
scp ~/.bashrc hadoop101:~/
scp ~/.bashrc hadoop102:~/
scp ~/.bashrc hadoop103:~/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>最后，在 hadoop100 上格式化 namenode：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hadoop namenode -format
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>再 ssh 登录到 hadoop102：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ssh hadoop102
start-all.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>之后，在你本地的浏览器中打开 10.211.55.100:50070 和 10.211.55.102:8088。如能正常显示，则安装成功。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果浏览器中不能打开上面两个页面，则确定所有主机中的防火墙是否关闭；并且最好使用 Chrome 浏览器，某些浏览器基于安全问题不能正常打开。</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/hadoop/benchmark.html">
        集群配置与管理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7696aff8.js" defer></script><script src="/assets/js/2.3c301967.js" defer></script><script src="/assets/js/17.3a4cbbc8.js" defer></script><script src="/assets/js/11.7aea8a94.js" defer></script>
  </body>
</html>
